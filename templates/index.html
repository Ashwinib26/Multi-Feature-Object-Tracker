<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ” Object Tracking App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” Object Tracking App</h1>
            <p>Detect and Match Objects Using Feature Tracking</p>
        </header>

        <div class="form-instructions">
            Upload a reference image (object) and a target image (scene) to detect the object via feature matching.
        </div>

        <form action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data" class="upload-form">
            <div class="form-group">
                <label>ğŸ–¼ï¸ Reference Image (Object):</label>
                <input type="file" name="reference_image" accept="image/*" required>
            </div>
            <div class="form-group">
                <label>ğŸŒ† Target Image (Scene):</label>
                <input type="file" name="target_image" accept="image/*" required>
            </div>
            <button type="submit">ğŸš€ Track Object</button>
        </form>

        {% if original_image and processed_image %}
        <div class="images">
            <div>
                <h3>Original (Target) Image</h3>
                <img src="{{ original_image }}" alt="Original Image">
            </div>
            <div>
                <h3>Processed Image with Matches</h3>
                <img src="{{ processed_image }}" alt="Processed Image">
            </div>
        </div>

        {% if stats %}
            {% if stats.detected %}
            <div class="object-status success">âœ… Object Found! Matches Detected: {{ stats.total_matches }}</div>
            {% else %}
            <div class="object-status fail">âŒ Object Not Found. Matches Too Low ({{ stats.total_matches }})</div>
            {% endif %}

            <div class="stats">
                ğŸ“Š Total Keypoint Matches: {{ stats.total_matches }}<br>
                ğŸ–ï¸ Top Matches Shown: {{ stats.top_matches_drawn }}
            </div>
        {% endif %}
        {% endif %}
    </div>
</body>
</html>
